1. To manually trigger the cronjob run the following:
kubectl create job consumption-report --from=cronjob/{{ include "consumption-report.fullname" . }}

2. To view the output of the consumption report run the following:

Get the Job name and set to the JOB_NAME variable
JOB_NAME=$(kubectl get jobs -o=jsonpath='{.items[?(@.metadata.ownerReferences[*].name=="consumption-consumption-report")].metadata.name}' -n {{ .Release.Namespace }})

Get the pod name of the job
POD_NAME=$(kubectl get pods --selector=job-name=$JOB_NAME -n {{ .Release.Namespace }})


kubectl get jobs $(kubectl get jobs -o=jsonpath='{.items[?(@.metadata.ownerReferences[*].name=="{{ include "consumption-report.fullname" . }}")].metadata.name}') -n {{ .Release.Namespace }}
kubectl logs -n {{ .Release.Namespace }} --selector=cronjob={{ include "consumption-report.fullname" . }}
